(this["webpackJsonpnhl-predictions"]=this["webpackJsonpnhl-predictions"]||[]).push([[0],{16:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(18),r=c.n(n),l=c(7),i=c(9),j=c.n(i),h=c(11),o=(c(16),c(20)),d=c(2),x=Object(s.createContext)(null);function b(e,t,c){var s,a,n,r,l,i,j=0;s=Math.round((e.evenStrengthxGF/c.evenStrengthxGF*t.evenStrengthxGA/2+c.evenStrengthxGF/2)*(1-t.evenStrengthSVP/100+1)*93)/100,r=Math.round((t.evenStrengthxGF/c.evenStrengthxGF*e.evenStrengthxGA/2+c.evenStrengthxGF/2)*(1-e.evenStrengthSVP/100+1)*87)/100,a=Math.round((e.powerPlayGF/c.powerPlayGF*t.penaltyKillxGA/2+c.powerPlayGF/2)*(1-t.penaltyKillSVP/100+1)*103)/100,l=Math.round((t.powerPlayGF/c.powerPlayGF*e.penaltyKillxGA/2+c.powerPlayGF/2)*(1-e.penaltyKillSVP/100+1)*97)/100,n=Math.round(100*(s+a))/100,i=Math.round(100*(r+l))/100;var h=Math.pow(n+i,.458);return{homeESG:s,homePPG:a,homeG:n,homeWP:j=Math.round(Math.pow(n,h)/(Math.pow(i,h)+Math.pow(n,h))*1e3)/100,awayESG:r,awayPPG:l,awayG:i,awayWP:Math.round(100*(10-j))/100}}var O=c(0),m=function(){var e,t=Object(s.useContext)(x),c=new Date,a=c.getMonth()+1,n=c.getDate(),r=c.getFullYear(),i=Object(s.useState)([]),o=Object(l.a)(i,2),d=o[0],m=o[1],u=Object(s.useState)(r+"-"+a+"-"+n),g=Object(l.a)(u,2),v=g[0],p=g[1],w=function(){var e=Object(h.a)(j.a.mark((function e(){var t,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("new Date: "+v),e.next=4,fetch("https://statsapi.web.nhl.com/api/v1/schedule//?date="+v);case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,(s=c.dates[0].games).forEach(y),m(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function y(e){var c=b(t[e.teams.home.team.id],t[e.teams.away.team.id],t[0]);e.teams.home.winPercentage=c.homeWP,e.teams.home.xG=c.homeG,e.teams.away.winPercentage=c.awayWP,e.teams.away.xG=c.awayG}return Object(s.useEffect)((function(){w()}),[v]),d&&(e=d.map((function(e){return Object(O.jsxs)("div",{class:"score",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{class:"logoDiv",children:Object(O.jsx)("img",{src:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+e.teams.home.team.id+".svg",alt:e.teams.home.team.name,class:"teamLogo"})}),Object(O.jsxs)("div",{class:"scoreDetails",children:[Object(O.jsx)("h2",{children:"Expected"}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h2",{children:e.teams.home.xG}),Object(O.jsx)("h4",{children:e.teams.home.winPercentage>5&&Object(O.jsxs)("div",{children:[e.teams.home.team.name," ",10*e.teams.home.winPercentage,"%"]})}),Object(O.jsx)("h4",{children:e.teams.home.winPercentage<=5&&Object(O.jsxs)("div",{children:[e.teams.away.team.name," ",10*e.teams.away.winPercentage,"%"]})}),Object(O.jsx)("h2",{children:e.teams.away.xG})]}),Object(O.jsx)("h2",{children:"Result"}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h1",{children:e.teams.home.score}),Object(O.jsx)("h4",{children:e.status.detailedState}),Object(O.jsx)("h1",{children:e.teams.away.score})]})]}),Object(O.jsx)("div",{class:"logoDiv",children:Object(O.jsx)("img",{src:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+e.teams.away.team.id+".svg",alt:e.teams.away.team.name,class:"teamLogo"})}),Object(O.jsx)("div",{})]})}))),Object(O.jsxs)(s.Fragment,{children:[Object(O.jsx)("div",{class:"scheduleMarker",children:"Schedule"}),Object(O.jsx)("div",{class:"date",children:Object(O.jsx)("h1",{children:v})}),Object(O.jsx)("div",{class:"scores",children:e}),Object(O.jsxs)("div",{class:"bottomButtons",children:[Object(O.jsx)("button",{class:"bottomButton",onClick:function(){return function(){var e=v.split(/[^0-9]/),t=new Date(e[0],e[1]-1,e[2]),c=new Date(t);c.setDate(c.getDate()-1),p(c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate())}()},children:"Previous Day"})," ",Object(O.jsx)("button",{class:"bottomButton",onClick:function(){return function(){var e=v.split(/[^0-9]/),t=new Date(e[0],e[1]-1,e[2]),c=new Date(t);c.setDate(c.getDate()+1),p(c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate())}()},children:"Next Day"})]})]})},u=c(19),g=function(){var e,t,c=Object(s.useState)(1),a=Object(l.a)(c,2),n=a[0],r=a[1],i=Object(s.useState)(2),j=Object(l.a)(i,2),h=j[0],o=j[1],d=Object(s.useContext)(x),m=Object(s.useState)(b(d[1],d[2],d[0])),g=Object(l.a)(m,2),v=g[0],p=g[1];return d&&(e=Object.keys(d).map((function(e){return Object(O.jsx)("div",{class:"selection",children:e>0&&Object(O.jsx)("div",{children:Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"radio",checked:n==e,value:n,onChange:function(t){r(e),p(b(d[e],d[h],d[0]))}}),Object(O.jsx)("img",{src:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+e+".svg"})]})})})}))),d&&(t=Object.keys(d).map((function(e){return Object(O.jsx)("div",{class:"selection",children:e>0&&Object(O.jsx)("div",{children:Object(O.jsxs)("label",{class:"selectorLabel",children:[Object(O.jsx)("input",{type:"radio",checked:h==e,value:h,onChange:function(t){o(e),p(b(d[n],d[e],d[0]))}}),Object(O.jsx)("img",{src:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+e+".svg"})]})})})}))),Object(O.jsx)(s.Fragment,{children:d&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{class:"predictorMarker",children:"predictor"}),Object(O.jsxs)("div",{class:"predictor",children:[Object(O.jsxs)("div",{class:"selector",children:[Object(O.jsx)("h1",{children:"Home"}),Object(O.jsx)("div",{class:"selections",children:e})]}),Object(O.jsxs)("div",{class:"predictorStats",children:[Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h4",{children:d[n].team}),Object(O.jsx)("h1",{children:"Team"}),Object(O.jsx)("h4",{class:"away",children:d[h].team})]}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h2",{children:v.homeESG}),Object(O.jsx)("h4",{children:"Expected Even Strength Goals"}),Object(O.jsx)("h2",{class:"away",children:v.awayESG})]}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h2",{children:v.homePPG}),Object(O.jsx)("h4",{children:"Expected Power Play Goals"}),Object(O.jsx)("h2",{class:"away",children:v.awayPPG})]}),Object(O.jsxs)("div",{class:"scoreDetailsRow",children:[Object(O.jsx)("h2",{children:v.homeG}),Object(O.jsx)("h4",{children:"Expected Score"}),Object(O.jsx)("h2",{class:"away",children:v.awayG})]}),Object(O.jsx)("div",{class:"predictorChart",children:Object(O.jsx)(u.PieChart,{animate:!0,reveal:!0,center:[100,100],viewBoxSize:[200,200],lineWidth:"25",paddingAngle:"1",totalValue:10,lengthAngle:-180,startAngle:0,labelPosition:120,labelStyle:{fontSize:14},label:function(e){var t=e.dataEntry;return"".concat(Math.round(10*t.percentage)/10," %")},data:[{title:d[n].team,value:v.awayWP,color:"#666"},{title:"",value:v.homeWP,color:"#000000"}]})})]}),Object(O.jsxs)("div",{class:"selector",children:[Object(O.jsx)("h1",{class:"away",children:"Away"}),Object(O.jsx)("div",{class:"selections",children:t})]})]})]})})},v=function(){for(var e,t=Object(s.useContext)(x),c=[],a=0,n=Object.entries(t);a<n.length;a++){var r=Object(l.a)(n[a],2),i=r[0];r[1];t[i].winP=b(t[i],t[0],t[0]).homeWP,0!=i&&c.push([t[i].winP,t[i].team,i])}return c.sort((function(e,t){var c=e[0],s=t[0],a=0;return c>s?a=-1:c<s&&(a=1),a})),console.log("https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+c[0][2]+".svg"),c&&(e=c.map((function(e){return Object(O.jsx)("tr",{class:"selection",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:c.indexOf(e)+1}),Object(O.jsxs)("td",{children:[" ",Object(O.jsx)("img",{class:"tableImg",src:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/"+e[2]+".svg"})]}),Object(O.jsx)("td",{children:e[1]})]})})}))),Object(O.jsxs)(s.Fragment,{children:[Object(O.jsx)("div",{class:"rankingsMarker",children:"rankings"}),Object(O.jsx)("div",{class:"rankingsTable",children:Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{}),Object(O.jsx)("th",{}),Object(O.jsx)("th",{})]}),e]})})]})},p=function(){return Object(O.jsx)(s.Fragment,{children:Object(O.jsxs)("div",{class:"header",children:[Object(O.jsx)("a",{class:"headerItem",href:"/schedule",children:Object(O.jsx)("h1",{class:"headerText",children:"Schedule"})}),Object(O.jsx)("a",{class:"headerItem",href:"/",children:Object(O.jsx)("h1",{class:"headerText",children:"Predictor"})}),Object(O.jsx)("a",{class:"headerItem",href:"/rankings",children:Object(O.jsx)("h1",{class:"headerText",children:"Power Rankings"})})]})})};var w=function(){var e=function(){var e=Object(h.a)(j.a.mark((function e(){var t,c,s,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kxbiyq2zxl.execute-api.us-east-2.amazonaws.com/v1/current-stats");case 3:return t=e.sent,e.next=6,t.json();case 6:for(c=e.sent,s=c.teams,a={},r=0;r<s.length;r++)a[s[r].id]={team:s[r].team,evenStrengthxGF:s[r].evenStrengthxGF,evenStrengthxGA:s[r].evenStrengthxGA,evenStrengthSVP:s[r].evenStrengthSVP,penaltyKillSVP:s[r].penaltyKillSVP,penaltyKillxGA:s[r].penaltyKillxGA,powerPlayGF:s[r].powerPlayGF};n(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),t=Object(s.useState)(["empty"]),c=Object(l.a)(t,2),a=c[0],n=c[1];return"empty"==a&&e(),Object(O.jsx)(s.Fragment,{children:"empty"!=a&&Object(O.jsx)("div",{children:Object(O.jsxs)(o.a,{children:[Object(O.jsx)(p,{}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(d.c,{children:Object(O.jsxs)(x.Provider,{value:a,children:[Object(O.jsx)(d.a,{exact:!0,path:"/",children:Object(O.jsx)(g,{})}),Object(O.jsx)(d.a,{exact:!0,path:"/schedule",children:Object(O.jsx)(m,{})}),Object(O.jsx)(d.a,{exact:!0,path:"/rankings",children:Object(O.jsx)(v,{})})]})})})]})})})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.5b965c51.chunk.js.map